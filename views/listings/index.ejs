<% layout('layout/boiler') -%>
<div >
    <%- include("../listings/nav-belt.ejs")%>

    <div class="row row-cols-lg-4  row-cols-md-2 row-cols-sm-1 m-3 p-3 mt-0 listing_con ">
        
        <% for(let dt of data){ %>
            <a id="listing_a" href="/listings/<%= dt._id%>" >
                <div class="card col card-listing" styel="width:18rem">
                    <img src="<%= dt.coverImage%>" 
                       class="card-img-top" 
                       alt="listing-image" 
                       style="height:18rem"
                    >
                    <div class="listing_like">
                        <% let check = currUser && currUser.wishlist.includes(dt._id) ? "red" : "" %>
                        <i class="fa-solid fa-heart heart_icon <%= check%> " id ="<%= dt._id%>"  ></i>
                    </div>
                    <div class="card-img-overlay"> </div>
                    <div class="card-body">
                      <p class="card-text">
                        <div class="row">
                            <div class="col-9 font-w-600"><%= dt.title %></div>
                            <div class="col-3 text-secondary font-s-1"><span class="text-right"><%= dt.ratingsAverage %><i class="fa-solid fa-star"></i> </span></div>
                        </div>
                        <div class="text-secondary font-s-1">
                            &#8377; <%= dt.price.toLocaleString("en-IN") %>/night
                            &nbsp;&nbsp; <i class="tax-info">+18% GST </i>
                        </div>
                      </p>
                    </div>
                </div>
            </a>
            
        <%}%>

    </div>
</div>

<script>
    let tax_toggle = document.getElementById("flexSwitchCheckDefault");
    tax_toggle.addEventListener("click",()=>{
        
        let tax_info= document.querySelectorAll(".tax-info");
        
        for( info of tax_info){
            
            if(info.style.display!="inline"){
                info.style.display="inline" 
            }
            else{
                info.style.display="none"
            }

        }
    });

</script>




